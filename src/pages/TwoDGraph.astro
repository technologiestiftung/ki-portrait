---
---

<svg id="twodgraph"></svg>

<script>
  import * as d3 from "d3";
  import {
    forceSimulation,
    forceLink,
    forceManyBody,
    forceCenter,
  } from "d3-force";

  async function main() {
    const svg = d3.select("#twodgraph");
    svg.attr("height", window.innerHeight.toString());
    svg.attr("width", window.innerWidth.toString());

    const data = await fetch("/eotai_images_extended_for_3d_graph.json").then(
      (res) => res.json()
    );

    const simulation = forceSimulation(data.nodes)
      .force("link", forceLink().links(data.links))
      .force("charge", forceManyBody().strength(-100))
      .force(
        "center",
        forceCenter(window.innerWidth / 2, window.innerHeight / 2)
      )
      .on("tick", ticked);

    const node = svg
      .append("g")
      .selectAll("circle")
      .data(data.nodes)
      .enter()
      .append("circle")
      .attr("r", 5)
      .attr("fill", "black")
      .attr("stroke", "black");

    function ticked() {
      node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
    }
  }
  main();
</script>
